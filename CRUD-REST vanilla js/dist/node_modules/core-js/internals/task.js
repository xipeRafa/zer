import global from'./global.js';import fails from'./fails.js';import createElement from'./document-create-element.js';import bind from'./function-bind-context.js';import html from'./html.js';import IS_IOS from'./engine-is-ios.js';import IS_NODE from'./engine-is-node.js';const _ref={exports:{}};(function(module,exports){var defer,channel,port,location=global.location,set=global.setImmediate,clear=global.clearImmediate,process=global.process,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",run=function run(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn();}},runner=function runner(id){return function(){run(id);}},listener=function listener(event){run(event.data);},post=function post(id){global.postMessage(id+"",location.protocol+"//"+location.host);};set&&clear||(set=function setImmediate(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){("function"==typeof fn?fn:Function(fn)).apply(void 0,args);},defer(counter),counter},clear=function clearImmediate(id){delete queue[id];},IS_NODE?defer=function(id){process.nextTick(runner(id));}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(runner(id));}:MessageChannel&&!IS_IOS?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=bind(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts&&location&&"file:"!==location.protocol&&!fails(post)?(defer=post,global.addEventListener("message",listener,!1)):ONREADYSTATECHANGE in createElement("script")?defer=function(id){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(id);};}:defer=function(id){setTimeout(runner(id),0);}),module.exports={set:set,clear:clear};})(_ref);var _ref2 = _ref.exports;
export default _ref2;